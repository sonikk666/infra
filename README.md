# Настройка оборудования

## Провести настройки сервера и клиента

| Задание                      | Сервер | Клиент | Способ реализации |
|------------------------------|:------:|:------:|------------------:|
| `Автозапуск при подаче 220В` | +      | -      | manual            |
| `Откл. блокировки экрана`    | +      | +      | manual            |
| `Откл. энергосбережения`     | +      | +      | manual            |
| `Выкл. по кнопке питания`    | +      | -      | manual            |
| `Локальный репозиторий`      | +      | +      | automated         |
| `Монтирование диска`         | +      | +      | automated         |
| `Автологин`                  | +      | -      | automated         |
| `Автозапуск СПО`             | +      | -      | automated         |
| `NTP сервер`                 | +      | -      | automated         |
| `NTP клиент`                 | -      | +      | automated         |

### 1. Настройка сервера на автозапуск после подачи питания

Настройте BIOS на сервере (на примере SuperMicro).

Для этого:

- Нажать `DEL` во время запуска сервера, когда об этом появится сообщение.
- Перейти `Advanced` --> `Boot Feature` --> `Restore on AC Power Loss`.
- Выбрать `Power On`.
- `Сохранить` настройки и `перезагрузить`.

### 2. Отключение блокировки экрана и энергосбережения

На рабочем столе `ПКМ` --> `Оформление рабочего стола` --> `Блокировка` --> `Убрать` галочку `Блокировать экран` --> `Применить`.

Далее `Настройки электропитания` --> `Выключить через` - `выкл`--> `Да`.

Для Сервера: `Настройки электропитания` --> `При нажатии кнопки питания` - `Выключить компьютер` --> `Да`.

### 3. Запуск автоматизированных задач

#### Внимание: ! Выполнять на своём хосте

- Установить Ansible из репозитория

    ```bash
    sudo apt install ansible
    ```

- Скопировать образ локального репозитория из сетевой папки

    `\\<folder>\installs\Astra_Linux\repos\repos_base-1.7.6.15-15.11.24_17.20.iso`

     в домашнюю папку пользователя.

    Должно получиться так: `/home/<username>/repos_base-1.7.6.15-15.11.24_17.20.iso`

- `Указать` в файле `inventory.yaml` `ip адреса` настраиваемых хостов.

- Запустить задание настройки выполнив в терминале

    ```bash
    # из папки infra
    ansible-playbook play.yml --ask-vault-pass
    ```

- ввести `пароль от vault`

- дождаться завершения

- проверить вывод на успешность
